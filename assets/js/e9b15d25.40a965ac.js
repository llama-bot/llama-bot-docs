"use strict";(self.webpackChunkllama_bot_docs=self.webpackChunkllama_bot_docs||[]).push([[637],{8784:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return o},contentTitle:function(){return p},metadata:function(){return s},toc:function(){return c},default:function(){return d}});var n=a(7462),i=a(3366),l=(a(7294),a(3905)),r=["components"],o={sidebar_position:2},p="Setting up",s={unversionedId:"api/setting-up",id:"api/setting-up",isDocsHomePage:!1,title:"Setting up",description:"This page will teach you how to set up the Llama bot web API.",source:"@site/docs/4-api/2-setting-up.md",sourceDirName:"4-api",slug:"/api/setting-up",permalink:"/llama-bot-docs/docs/api/setting-up",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/4-api/2-setting-up.md",version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Overview",permalink:"/llama-bot-docs/docs/api/overview"},next:{title:"Overview",permalink:"/llama-bot-docs/docs/web-interface/overview"}},c=[{value:"Steps",id:"steps",children:[{value:"Pre-requirements",id:"pre-requirements",children:[]},{value:"Discord",id:"discord",children:[]},{value:"Firebase",id:"firebase",children:[]},{value:"Local",id:"local",children:[]}]},{value:"Testing",id:"testing",children:[{value:"Deploying",id:"deploying",children:[]}]},{value:"More info",id:"more-info",children:[]}],m={toc:c};function d(e){var t=e.components,a=(0,i.Z)(e,r);return(0,l.kt)("wrapper",(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"setting-up"},"Setting up"),(0,l.kt)("p",null,"This page will teach you how to set up the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/llama-bot/llama-bot-web-api"},"Llama bot web API"),"."),(0,l.kt)("h2",{id:"steps"},"Steps"),(0,l.kt)("h3",{id:"pre-requirements"},"Pre-requirements"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://nodejs.org"},"Node.js")," version 14 or greater"),(0,l.kt)("li",{parentName:"ul"},"Discord account"),(0,l.kt)("li",{parentName:"ul"},"Google Firebase account")),(0,l.kt)("h3",{id:"discord"},"Discord"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Go to the ",(0,l.kt)("a",{parentName:"p",href:"https://discord.com/developers/applications"},"Discord Developer Portal")," and create an application. Select one if you already have it. Using the same application used by the discord bot is recommended.")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Go to the OAuth2 tab.")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Add the following redirect URIs:"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"localhost for testing"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"http://localhost:5001/<project-id>/us-central1/api")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"http://localhost:5001/<project-id>/us-central1/api/auth")))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"http"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"http://us-central1-<project-id>.cloudfunctions.net/api")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"http://us-central1-<project-id>.cloudfunctions.net/api/auth")))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"https"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"https://us-central1-<project-id>.cloudfunctions.net/api")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"https://us-central1-<project-id>.cloudfunctions.net/api/auth"))))))),(0,l.kt)("h3",{id:"firebase"},"Firebase"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"must be the same project that the llama bot is using")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Create a firebase project."),(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"https://console.firebase.google.com"},"https://console.firebase.google.com"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Create/Select a project. Make sure it is using the ",(0,l.kt)("a",{parentName:"p",href:"https://firebase.google.com/pricing"},"blaze plan"),".")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Go to the ",(0,l.kt)("inlineCode",{parentName:"p"},"Authentication")," tab and enable ",(0,l.kt)("inlineCode",{parentName:"p"},"Email/Password")," Authentication.")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Go to the ",(0,l.kt)("inlineCode",{parentName:"p"},"Firestore Database")," tab and enable it (using production mode is highly recommended)."))),(0,l.kt)("h3",{id:"local"},"Local"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Clone the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/llama-bot/llama-bot-web-api"},"llama-bot-web-api")," repository"),(0,l.kt)("p",{parentName:"li"},"Using HTTPS"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/llama-bot/llama-bot-web-api.git\n")),(0,l.kt)("p",{parentName:"li"},"Using SSH:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"git clone git@github.com:llama-bot/llama-bot-web-api.git\n"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Create ",(0,l.kt)("inlineCode",{parentName:"p"},"functions/src/config.json")," and fill in the data."),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="functions/src/config.json"',title:'"functions/src/config.json"'},'{\n  "region": "FIREBASE_FUNCTIONS_REGION_HERE", // Region where firebase functions is hosted in. Example: us-central1\n  "scopes": ["DISCORD", "SCOPES", "HERE"] // Discord OAuth2 scopes. Example: ["identify", "email"]\n}\n'))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Create ",(0,l.kt)("inlineCode",{parentName:"p"},"functions/src/secret.json")," and fill in the data."),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="functions/src/secret.json"',title:'"functions/src/secret.json"'},'{\n  "projectID": "FIREBASE_PROJECT_ID_HERE", // Firebase project ID\n  "clientID": "DISCORD_CLIENT_ID_HERE", // Discord OAuth2 Client ID\n  "clientSecret": "DISCORD_CLIENT_SECRET_HERE", // Discord OAuth2 Client Secret\n  "secret": "SECRET_COOKIE_KEY_HERE" // secret to be used for express session\n}\n'))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Install firebase cli tools."),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm install -g firebase-tools\n"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Select firebase project"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"firebase use <firebase-project-id>\n"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Go to ",(0,l.kt)("inlineCode",{parentName:"p"},"functions")," directory and install necessary dependencies."),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm install\n")))),(0,l.kt)("h2",{id:"testing"},"Testing"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Start local test server by running the following command:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm run serve\n"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Open locally served API and log in with your discord account."),(0,l.kt)("div",{parentName:"li",className:"admonition admonition-warning alert alert--danger"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"HTTP",(0,l.kt)("strong",{parentName:"p"},"S")," won't work when serving locally. Use HTTP instead."))),(0,l.kt)("p",{parentName:"li"},"Login test URI: ",(0,l.kt)("inlineCode",{parentName:"p"},"http://localhost:5001/<FIREBASE-PROJECT-ID>/us-central1/api/login"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"If everything is set up correctly, this should have added a new user that you can check it in the firebase ",(0,l.kt)("inlineCode",{parentName:"p"},"Authentication")," tab."))),(0,l.kt)("h3",{id:"deploying"},"Deploying"),(0,l.kt)("p",null,"Deploying the functions to production is as simple as running the following command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"firebase deploy\n")),(0,l.kt)("p",null,"Production API URI: ",(0,l.kt)("inlineCode",{parentName:"p"},"https://us-central1-<firebase-project-id>.cloudfunctions.net/api"),"."),(0,l.kt)("h2",{id:"more-info"},"More info"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"discord developers documentation: ",(0,l.kt)("a",{parentName:"li",href:"https://discord.com/developers/docs"},"https://discord.com/developers/docs")),(0,l.kt)("li",{parentName:"ul"},"firebase admin sdk documentation: ",(0,l.kt)("a",{parentName:"li",href:"https://firebase.google.com/docs"},"https://firebase.google.com/docs"))))}d.isMDXComponent=!0}}]);